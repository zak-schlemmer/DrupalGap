/*! drupalgap 2018-07-17 */
function core_rest_pre_process(a,b){dg.spinnerShow()}function core_rest_post_process(a){dg.spinnerHide()}function system_pre_process_route_change(a,b){if(void 0!==b){var c=dg.blocksLoad();for(var d in c)if(c.hasOwnProperty(d)){var e=c[d],f=e.getRegion();f&&f.getHiddenBlocks().length==f.getBlocks().length&&dg.removeBodyClass("no-"+f.get("id"))}}}var dg={activeTheme:null,blocks:null,regions:null,spinner:0,themes:{},_title:"",_continued:!1,_postRenderMax:128,_libraries:{},_messages:[]},drupalgap=dg;dg.settings={mode:"web-app",front:null,blocks:{}},dg.start=function(){dg.isCompiled()?document.addEventListener("deviceready",dg.deviceready,!1):dg.deviceready()},dg.deviceready=function(){dg.bootstrap(),jDrupal.moduleInvokeAll("deviceready").then(function(){jDrupal.moduleImplements("deviceready")||dg._continued||jDrupal.connect().then(dg.continue,function(){console.log("deviceready connect failed",arguments)})})},dg.bootstrap=function(){dg.router.config({});var a=jDrupal.modulesLoad();for(var b in a)if(a.hasOwnProperty(b)){var c=dg.getModuleRoutes(b);if(c)for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];e.key=d,dg.router.add(e);var f=dg.router.getBaseRoute(e);f&&dg.router.saveAsChildRoute(e,f)}}dg.config("front")||dg.config("front","dg"),dg.themeLoad().then(function(){dg.blocksLoad(),jDrupal.moduleInvokeAll("init").then(function(){dg.router.add(function(){}).listen()})})},dg.continue=function(){dg._continued=!0,dg.router.check(dg.router.getPath())},dg.spinnerShow=function(){dg.spinner++},dg.spinnerHide=function(){dg.spinner--},dg.isArray=function(a){return jDrupal.isArray(a)},dg.isEmpty=function(a){return jDrupal.isEmpty(a)},dg.isInt=function(a){return jDrupal.isInt(a)},dg.salt=function(){return jDrupal.userPassword.apply(this,arguments)},dg.currentUser=function(){return jDrupal.currentUser()},dg.userPassword=function(){return console.log("dg.userPassword() is deprecated, use dg.salt() instead."),dg.salt.apply(this,arguments)},dg.Block=function(a,b,c,d){for(var e in c)c.hasOwnProperty(e)&&(this[e]=c[e]);for(var f in d)d.hasOwnProperty(f)&&(this[f]=d[f]);this._id||(this._id=b),this._module||(this._module=a),this._format||(this._format="div"),this._before||(this._before=""),this._prefix||(this._prefix=""),this._suffix||(this._suffix=""),this._after||(this._after=""),this._routes||(this._routes=[]),dg.setRenderElementDefaults(this),this._attributes.id||(this._attributes.id=dg.cleanCssIdentifier(b))},dg.Block.prototype.get=function(a){var b="_"+a;return void 0!==this[b]?this[b]:null},dg.Block.prototype.set=function(a,b){this["_"+a]=b},dg.Block.prototype.getRegion=function(){return dg.regions?dg.regions[this.get("region")]:null},dg.Block.prototype.buildWrapper=function(){var a=this;return new Promise(function(b,c){a.build().then(function(c){dg.setRenderElementDefaults(c),jDrupal.moduleInvokeAll("block_view_alter",c,a).then(function(){a.set("content",c),b(a)})})})},dg.Block.prototype.render=function(){var a=dg.cleanCssIdentifier(this.get("id")),b=dg.qs("#"+a),c=dg.render(this.get("content"));b?b.innerHTML=c:setTimeout(function(a){var b=dg.qs("#"+a);b&&(b.innerHTML=c)},1,a)},dg.Block.prototype.build=function(){return new Promise(function(a,b){a("")})},dg.Block.prototype.getVisibility=function(){var a=this,b=dg.currentUser();return new Promise(function(c,d){var e=!0,f=function(){c({visible:e,block:a})},g=a.get("access");if(g)return e=g.call(),void f();var h=a.get("roles");if(h){e=!1;for(var i=0;i<h.length&&!(e=b.hasRole(h[i].target_id)?h[i].visible:!h[i].visible);i++);}var j=a.get("routes");if(j.length){e=!1;for(var k=dg.getRoute(),i=0;i<j.length;i++)if(k.key==j[i].key)if(j[i].target_id){if(b.hasRole(j[i].target_id)&&(e=j[i].visible))break}else if(e=j[i].visible)break}f()})},dg.blocksLoad=function(){if(!dg.blocks){dg.blocks={};var a={},b=dg.config("theme").name,c=dg.settings.blocks[b],d=0;for(var e in c)if(c.hasOwnProperty(e)){var f=0;for(var g in c[e])if(c[e].hasOwnProperty(g)){var h=c[e][g];h._region=e,h._weight=void 0!==h._weight?h._weight:f,f=h._weight+1,a[g]=h,d++}}0==d&&console.log(dg.t("No blocks for @theme in settings.js",{"@theme":b}));var i=jDrupal.modulesLoad();for(var j in i)if(i.hasOwnProperty(j)&&i[j].blocks){var k=i[j].blocks();if(k)for(h in k)if(k.hasOwnProperty(h)&&a[h]){var l=k[h];if(dg.blocks[h]){var m='WARNING - The "'+h+'" block provided by the "'+dg.blocks[h].get("module")+'" module has been overwritten by the "'+j+'" module.';console.log(m)}dg.blocks[h]=new dg.Block(j,h,l,a[h])}}}return dg.blocks},dg.blockLoad=function(a){return dg.blocks[a]?dg.blocks[a]:null},dg.blockRefresh=function(a){"main"==a?dg.router.execute(function(b){dg.blockSetContent(a,b)}):dg.blockSetContent(a)},dg.blockSetContent=function(a,b){var c=dg.blockLoad(a);c.buildWrapper().then(function(a){b&&a.set("content",b),c.render()})},dg.getBlockFromDom=function(a){return document.querySelector("#"+dg.cleanCssIdentifier(a))},dg.config=function(a,b){return void 0!==b?void(dg.settings[a]=b):void 0!==dg.settings[a]?dg.settings[a]:null},dg.getMode=function(){return this.config("mode")},dg.setMode=function(a){this.config("mode",a)},dg.isCompiled=function(){return dg.inArray(dg.getMode(),["phonegap","cordova"])},dg.platform=function(){return dg.isCompiled()?device.platform.toLowerCase():"web"},dg.hasConnection=function(){return!dg.isCompiled()||navigator.connection.type!=Connection.NONE},dg.getRoute=function(){return dg.router.load(dg.getPath())},dg.getPath=function(){var a=dg.router.getPath();return""==a&&(a=dg.getFrontPagePath()),a},dg.getUrl=function(){return window.location.href},dg.getFrontPagePath=function(){var a=dg.config("front");return null==a&&(a="dg"),a},dg.arg=function(a,b){b||(b=dg.getPath());var c=b.split("/");return void 0===a||null===a?c:void 0!==c[a]?c[a]:null},dg.error=function(a,b,c,d){c&&console.log(c);var e=dg.router.loadRoute("system."+b);if(!e)return console.log(b,arguments),void dg.alert(c);dg.setTitle(e.defaults._title),e.defaults._controller().then(function(a){dg.blockSetContent("main",a)})},dg.isFrontPage=function(){return dg.getFrontPagePath()==dg.getPath()||""==dg.getPath()},dg.getTitle=function(){return dg._title},dg.isObject=function(a){return"object"==typeof a},dg.isString=function(a){return"string"==typeof a},dg.isUndefined=function(a){return void 0===a},dg.isProperty=function(a,b){return b.hasOwnProperty(a)&&"_"==a.charAt(0)},dg.removeFromArray=function(a,b){for(var c=b.length-1;c>=0;c--)if(b[c]===a){b.splice(c,1);break}},dg.setTitle=function(a,b,c){void 0===b&&(b=!0),void 0===c&&(c=!0),a=a||"","object"==typeof a&&(a=a._title?a._title:""),dg._title=a,b&&dg.setDocumentTitle(a),c&&dg.setPageTitle(a)},dg.getDocumentTitle=function(){return document.title},dg.setDocumentTitle=function(a){a=a||dg.config("title"),document.title=dg.theme("document_title",{_title:dg.t(a)})},dg.setPageTitle=function(a){var b=document.getElementById("title");b&&(b.innerHTML="string"==typeof a?dg.theme("title",{_title:a}):dg.render(a))},dg.attrs=function(a){var b=a._attributes;return b?dg.attributes(b):""},dg.attributes=function(a){var b="";if(a)for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];Array.isArray(d)&&d.length?b+=c+'="'+d.join(" ")+'" ':null===d?b+=" "+c+" ":""!=d?b+=c+'="'+d+'" ':"class"!=c&&(b+=c+" ")}return b},dg.attributesInit=function(a){var b=a._attributes?a._attributes:{};b.class?"string"==typeof b.class&&(b.class=[b.class]):b.class=[],a._attributes=b},dg.setVar=function(a,b){window.localStorage.setItem(a,JSON.stringify(b))},dg.getVar=function(a,b){var c=JSON.parse(window.localStorage.getItem(a));return null===c&&void 0!==b?(dg.setVar(a,b),b):c},dg.deleteVar=function(a){return window.localStorage.removeItem(a)},dg.applyToConstructor=function(a,b){var c=[null].concat(b);return new(a.bind.apply(a,c))},dg.cleanCssIdentifier=function(a){return a.replace(/_/g,"-").toLowerCase()},dg.getCamelCase=function(a){return a.replace(/[-_]([a-z])/g,function(a){return a[1].toUpperCase()})},dg.extend=function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];jDrupal.isEmpty(d)||(a[c]=d)}return a},dg.killCamelCase=function(a,b){return b||(b="-"),jDrupal.lcfirst(a).replace(/([A-Z])/g,b+"$1").toLowerCase()},dg.inArray=function(a,b){return jDrupal.inArray(a,b)},dg.imagePath=function(a){var b=dg.restPath()+a;return-1!=b.indexOf("public://")?b=b.replace("public://",dg.config("files").publicPath+"/"):-1!=b.indexOf("private://")&&(b=b.replace("private://",dg.config("files").privatePath+"/")),b},dg.elementAttributesInit=function(a){dg.attributesInit(a)},dg.b=function(a,b){return b||(b={}),b._value||(b._value=a),dg.theme("button",b)},dg.l=function(a,b,c){return c||(c={}),c._text||(c._text=a),c._path||(c._path=b),dg.theme("link",c)},dg.bl=function(a,b,c){return this.l.apply(this,arguments)},dg.removeElement=function(a){var b=dg.qs("#"+a);b&&b.parentElement.removeChild(b)},dg.t=function(a,b,c){if(b)for(var d in b)b.hasOwnProperty(d)&&(a=a.replace(d,b[d]));return a},dg.formatPlural=function(a,b,c){return 1==parseInt(a)?b:c},dg.Node=function(a){return new jDrupal.Node(a)},dg.entityController=function(a){var b={};return b.entity={_theme:"bucket",_grab:function(){var b=dg.router.getActiveRoute(),c=b.defaults._entity_type,d=dg.getCamelCase(c)+"Load";return new Promise(function(c,e){dg[d](a).then(function(a){b.defaults._handler(a,c,e)})})}},b},dg.forms={},dg.theme_form=function(a){var b="dg.theme_form - ",c="";a._id||(c="missing _id");var d=a._id,e=window[d];if(e||(c="form id not found: "+d),""!=c)return console.log(b+c),"";var f=dg.killCamelCase(d,"-");a._attributes.id="form-wrapper-"+f,a._node&&(a._attributes.id+="-"+a._node.nid);var g=a._attributes.id;return dg.render({_markup:"<div "+dg.attrs(a)+"></div>",_postRender:[function(){var c=dg.addForm(d,dg.applyToConstructor(e));c.getForm(a).then(function(a){var d=c.form,e=dg.qs("#"+g);if(!e)return void console.log(b+"form wrapper missing: "+g);e.innerHTML=a,dg.formHasActions(d)&&dg.formAttachSubmissionHandler(d._attributes.id),dg.runPostRenders()})}]})},dg.formDomIdFromId=function(a){return dg.killCamelCase(a,"-").toLowerCase()},dg.Form=function(a){this.id=a,this.form={_attributes:{id:dg.formDomIdFromId(a),class:[]},_validate:[a+".validateForm"],_submit:[a+".submitForm"],_after_build:[]},this.form_state=new dg.FormStateInterface(this),this.elements={}},dg.Form.prototype.get=function(a){return void 0!==this[a]?this[a]:null},dg.Form.prototype.getFormId=function(){return this.get("id")},dg.Form.prototype.getFormDomId=function(){return this.form._attributes.id},dg.Form.prototype.getForm=function(){var a=this,b=arguments;return new Promise(function(c,d){var e=function(){a.form._attributes["data-id"]=a.id;for(var b in a.form)if(dg.isFormElement(b,a.form)){var d=a.form[b];if("actions"==d._type){dg.setFormElementDefaults(b,d);for(var e in d)dg.isFormElement(e,d)&&dg.setFormElementDefaults(e,d[e])}else dg.setFormElementDefaults(b,d)}var f=jDrupal.moduleInvokeAll("form_alter",a.form,a.getFormState(),a.getFormId()),g=function(){for(var b in a.form)if(dg.isFormElement(b,a.form)){var d=a.form[b];switch(d._type||(d._type="markup"),d._widgetType||(d._widgetType="FormElement"),d._widgetType){case"FieldWidget":case"FormWidget":var e=a.form._entity.get(b),f=0,g=new dg.modules[d._module][d._widgetType][d._type](a.form._entityType,a.form._bundle,b,d,e,f);if(a.elements[b]=g,g.form(e,f,d,a.form,a.form_state),"hidden"==d._type){a.form[b]=d;continue}var h={};d._title&&(h.label={_theme:"form_element_label",_title:d._title}),h.element=d;var i={_theme:"container",_children:h,_weight:d._weight};a.form[b]=i;break;case"FormElement":default:var j=d._widgetType;if(d._type){var k=jDrupal.ucfirst(dg.getCamelCase(d._type))+"Element";dg[k]&&(j=k)}var l=new dg[j](b,d,a);if(a.elements[b]=l,jDrupal.inArray(d._type,["hidden","markup"]))continue;var h={_attributes:{class:[]}};d._title&&!d._attributes.placeholder&&("checkbox"==d._type||(h.label={_theme:"form_element_label",_title:d._title,_attributes:{class:[],for:d._attributes.id}})),h.element=l;var i={_theme:"container",_children:h,_attributes:{class:[]},_weight:d._weight};a.form[b]=i}}for(var m=[],n=0;n<a.form._after_build.length;n++){var o=a.form._after_build[n].split("."),p=o[0],q=o[1];dg.modules[p]&&dg.modules[p][q]&&m.push(dg.modules[p][q].apply(a,[a.form,a.getFormState()]))}Promise.all(m).then(function(){c("<form "+dg.attributes(a.form._attributes)+">"+dg.render(a.form)+"</form>")})};f?f.then(g):g()};if(b.length){for(var f=[a.form,a.form_state],g=0;g<b.length;g++)f.push(b[g]);a.buildForm.apply(this,f).then(e)}else a.buildForm(a.form,a.form_state).then(e)})},dg.Form.prototype.getFormState=function(){return this.form_state},dg.Form.prototype.buildForm=function(a,b,c){return new Promise(function(a,b){a()})},dg.Form.prototype.validateForm=function(a){return new Promise(function(a,b){a()})},dg.Form.prototype.submitForm=function(a,b,c){return new Promise(function(a,b){a()})},dg.Form.prototype.submit=function(){return this._submission()},dg.Form.prototype._submission=function(){var a=this;return a.disableSubmitButton(),new Promise(function(b,c){var d=a.getFormState();d.setFormState().then(function(){d.clearErrors(),a._validateForm().then(function(){if(d.hasAnyErrors())return a.enableSubmitButton(),d.displayErrors(),void c();a._submitForm(a,d).then(function(){var c=dg._GET("destination")?dg._GET("destination"):null;!c&&a.form._action&&(c=a.form._action),c&&dg.goto(c),b()}).catch(function(){a.enableSubmitButton()})})})})},dg.Form.prototype._validateForm=function(){var a=this,b=a.getFormState(),c=function(a){b.setErrorByName(a,dg.t("The @name field is required.",{"@name":a}))};for(var d in a.form)if(dg.isFormElement(d,a.form)){var e=a.form[d];if(e._theme&&"container"==e._theme){if("function"!=typeof e._children.element.get)continue;e._children.element.get("element")._required&&!e._children.element.validateValue(b.getValue(d))&&c(d)}else void 0!==e._required&&e._required&&jDrupal.isEmpty(b.getValue(d))&&(console.log("_validateForm - we should be invoking validateValue here if possible"),c(d))}for(var f=[],g=0;g<a.form._validate.length;g++){var h=a.form._validate[g].split("."),i=h[0],j=h[1];i!=this.getFormId()||"validateForm"!=j?window[i]&&window[i][j]&&f.push(window[i][j].apply(a,[a.form,a.getFormState()])):f.push(this[j].apply(a,[a.form,a.getFormState()]))}return Promise.all(f)},dg.Form.prototype._submitForm=function(){for(var a=this,b=[],c=0;c<a.form._submit.length;c++){var d=a.form._submit[c].split("."),e=d[0],f=d[1];e!=this.getFormId()||"submitForm"!=f?dg.modules[e]&&dg.modules[e][f]&&b.push(dg.modules[e][f].apply(a,[a.form,a.getFormState()])):b.push(this[f].apply(a,[a.form,a.getFormState()]))}return Promise.all(b)},dg.Form.prototype.getSubmitButtonSelector=function(){return"#"+this.getFormDomId()+" #"+dg.formSubmitButtonId(this)},dg.Form.prototype.getSubmitButton=function(){return dg.qs(this.getSubmitButtonSelector())},dg.Form.prototype.enableSubmitButton=function(){var a=this.getSubmitButton();a&&(a.disabled=!1)},dg.Form.prototype.disableSubmitButton=function(){var a=this.getSubmitButton();a&&(dg.qs(a).disabled=!0)},dg.formSubmitButtonId=function(a){if(a.elements&&a.elements.actions){var b=a.elements.actions.element;for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if(d&&dg.isFormElement(c,b)&&"submit"==d._type)return d._attributes.id}}return null},dg.createForm=function(a,b){return b.prototype=new dg.Form(a),b.constructor=b,window[a]=b,b},dg.addForm=function(a,b){return dg.forms[a]=b,dg.forms[a]},dg.formExists=function(a){return jDrupal.functionExists(a)},dg.loadForm=function(a){return dg.forms[a]?dg.forms[a]:null},dg.loadForms=function(){return dg.forms},dg.removeForm=function(a){delete dg.forms[a]},dg.removeForms=function(){dg.forms={}},dg.formHasActions=function(a){var b=!1;for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(d&&d._theme&&"container"==d._theme&&d._children){for(var e in d._children)if(d._children.hasOwnProperty(e)){var f=d._children[e];if("actions"==f.name){b=!0;break}}if(b)break}}return b},dg.formAttachSubmissionHandler=function(a){function b(a){a.preventDefault&&a.preventDefault();var b=c.getAttribute("data-id");return dg.loadForm(b).submit().then(function(){},function(){}),!1}var c=dg.qs("#"+a);return!!c&&(c.attachEvent?c.attachEvent("submit",b):c.addEventListener("submit",b),!0)},dg.loadFormFromInterface=function(a){return dg.loadForm(jDrupal.ucfirst(dg.getCamelCase(a._attributes.id)))},dg.isFormElement=function(a,b){return"object"==typeof b&&b.hasOwnProperty(a)&&"_"!=a.charAt(0)},dg.isFormProperty=function(a,b){return b.hasOwnProperty(a)&&"_"==a.charAt(0)},dg.setFormElementDefaults=function(a,b){var c=b._attributes?b._attributes:{};c.id||(c.id=dg.formElementDomIdFromName(a)),c.name||(c.name=a),c.class||(c.class=[]),!c.value&&b._value&&(c.value=b._value),void 0!==b._default_value&&(c.value=b._default_value),b._widgetType||(b._widgetType="FormElement"),b._title_placeholder&&(c.placeholder=b._title),b._attributes=c},dg.formElementDomIdFromName=function(a){return"edit-"+a.toLowerCase().replace(/_/g,"-")},dg.configForm=function(a){a._submit.push("system.configFormSubmit")},dg.FormElement=function(a,b,c){arguments.length&&dg.FormElementPrepare(this,arguments)},dg.FormElementPrepare=function(a,b){dg._formElementPrepare(a,b)},dg._formElementPrepare=function(a,b){var c=b[1];c&&void 0!==c._default_value&&void 0===c._attributes.value&&(c._attributes.value=c._default_value),a.name=b[0],a.element=c,a.form=b[2]},dg.FormElement.prototype.id=function(){return this.element?this.element._attributes.id:null},dg.FormElement.prototype.getForm=function(){return this.form},dg.FormElement.prototype.getFormDomId=function(){return this.getForm().getFormDomId()},dg.FormElement.prototype.get=function(a){return this[a],this[a]},dg.FormElement.prototype.getQuerySelector=function(){return"#"+this.getFormDomId()+" #"+this.id()},dg.FormElement.prototype.getElement=function(a){return this.get("element")[a],this.get("element")[a]},dg.FormElement.prototype.getDomElement=function(){return document.querySelector(this.getQuerySelector())},dg.FormElement.prototype.validateValue=function(a){return!jDrupal.isEmpty(a)},dg.FormElement.prototype.valueCallback=function(){var a=this;return new Promise(function(b,c){var d=null,e=a.getDomElement();e&&(d=e.value),b({name:a.get("name"),value:d})})},dg.theme_form_element_label=function(a){return"<label "+dg.attributes(a._attributes)+">"+a._title+"</label>"},dg.theme_actions=function(a){var b="";for(prop in a)dg.isFormElement(prop,a)&&(b+=dg.render(a[prop]));return b},dg.theme_checkbox=function(a){a._attributes.type="checkbox",a._attributes.id||(a._attributes.id="checkbox-"+dg.salt()),a._default_value&&(a._attributes.checked="checked");var b=a._title?' <label for="'+a._attributes.id+'">'+a._title+"</label>":"",c=a._prefix?a._prefix:"",d=a._suffix?a._suffix:"";return c+"<input "+dg.attributes(a._attributes)+" />"+b+d},dg.theme_checkboxes=function(a){var b="";for(var c in a._options)if(a._options.hasOwnProperty(c)){var d=a._options[c],e="object"!=typeof d?{_title:jDrupal.isEmpty(d)?c:d}:d;e._attributes||(e._attributes={}),void 0===e._attributes.value&&(e._attributes.value=c),a._default_value&&a._default_value[c]&&(e._default_value=a._default_value[c]),b+=dg.theme("checkbox",e)+"<br />"}return"<div "+dg.attributes(a._attributes)+">"+b+"</div>"},dg.theme_email=function(a){return a._attributes.type="email","<input "+dg.attributes(a._attributes)+"/>"},dg.theme_hidden=function(a){return a._attributes.type="hidden","<input "+dg.attributes(a._attributes)+" />"},dg.theme_number=function(a){return a._attributes.type="number","<input "+dg.attributes(a._attributes)+"/>"},dg.theme_password=function(a){return a._attributes.type="password","<input "+dg.attributes(a._attributes)+" />"},dg.theme_radio=function(a){a._attributes.type="radio";var b=a._title?a._title:null,c=a._title_attributes?a._title_attributes:{};c.for||(c.for=a._attributes.id);var d="<input "+dg.attributes(a._attributes)+"/>";return b&&(d+="<label "+dg.attributes(c)+">"+b+"</label>"),d},dg.theme_radios=function(a){var b="";for(var c in a._options)if(a._options.hasOwnProperty(c)){var d=a._options[c],e={_title:jDrupal.isEmpty(d)?c:d,_attributes:{value:c,name:a._attributes.name}};a._default_value==c&&(e._attributes.checked="checked"),b+="<div>"+dg.theme("radio",e)+"</div>"}return"<div "+dg.attributes(a._attributes)+">"+b+"</div>"},dg.theme_select=function(a){var b="";if(a._options)for(var c in a._options)if(a._options.hasOwnProperty(c)){var d=a._options[c];if("object"==typeof d)void 0!==a._value&&a._value==c&&(d._attributes.selected=""),b+=dg.render(d);else{var e="";void 0!==a._value&&a._value==c&&(e=" selected "),b+='<option value="'+c+'" '+e+">"+d+"</option>"}}return"<select "+dg.attributes(a._attributes)+">"+b+"</select>"},dg.theme_submit=function(a){return a._attributes.type="submit",!a._attributes.value&&a._value&&(a._attributes.value=a._value),"<input "+dg.attributes(a._attributes)+"/>"},dg.theme_textarea=function(a){var b=a._value?a._value:"";return"<textarea "+dg.attributes(a._attributes)+">"+b+"</textarea>"},dg.theme_textfield=function(a){return a._attributes.type="text","<input "+dg.attributes(a._attributes)+"/>"},dg.FormStateInterface=function(a){this.form=a,this.values={},this.errors={}},dg.FormStateInterface.prototype.get=function(a){return void 0!==this[a]?this[a]:null},dg.FormStateInterface.prototype.set=function(a,b){this[a]=b},dg.FormStateInterface.prototype.setFormState=function(){var a=this,b=a.get("form"),c=[];for(var d in b.elements)b.elements.hasOwnProperty(d)&&"actions"!=d&&"markup"!=b.elements[d].element._type&&c.push(b.elements[d].valueCallback());return Promise.all(c).then(function(b){for(var c=0;c<b.length;c++)a.setValue(b[c].name,b[c].value)})},dg.FormStateInterface.prototype.setErrorByName=function(a,b){this.errors[a]=b},dg.FormStateInterface.prototype.getErrors=function(){return this.errors},dg.FormStateInterface.prototype.hasAnyErrors=function(){var a=!1,b=this.getErrors();for(error in b)if(b.hasOwnProperty(error)){a=!0;break}return a},dg.FormStateInterface.prototype.getErrorMessages=function(){var a=this.getErrors(),b=[];for(error in a)a.hasOwnProperty(error)&&b.push(a[error]);return b.length?b:null},dg.FormStateInterface.prototype.displayErrors=function(){var a=this.getErrorMessages();if(a){a.forEach(function(a){dg.setMessage(a,"error")}),dg.blockRefresh("messages");var b=dg.getBlockFromDom("messages");b&&b.scrollIntoView(!1)}},dg.FormStateInterface.prototype.clearErrors=function(){this.errors={}},dg.FormStateInterface.prototype.getValue=function(a,b){return void 0!==this.get("values")[a]?this.get("values")[a]:b},dg.FormStateInterface.prototype.setValue=function(a,b){this.values[a]=b},dg.FormStateInterface.prototype.getValues=function(){return this.get("values")},dg.FormStateInterface.prototype.setValues=function(a){this.values=a},dg.FormWidget=function(a,b,c,d,e,f){},dg.FormWidget.prototype=new dg.FormElement,dg.FormWidget.prototype.constructor=dg.FormWidget,dg.FormWidgetPrepare=function(a,b){a.widgetType="FormWidget",a.entityType=b[0],a.bundle=b[1],a.fieldName=b[2],a.name=a.fieldName,a.element=b[3],a.items=b[4],a.delta=b[5],a.fieldFormMode=a.element._fieldFormMode},dg.FormWidget.prototype.valueCallback=function(){var a=this;return new Promise(function(b,c){var d=null,e=document.getElementById(a.id());e&&(d=e.value),b({name:a.get("name"),value:[{value:d}]})})},dg.CheckboxElement=function(a,b,c){dg.FormElementPrepare(this,arguments)},dg.CheckboxElement.prototype=new dg.FormElement,dg.CheckboxElement.prototype.constructor=dg.CheckboxElement,dg.CheckboxElement.prototype.valueCallback=function(){var a=this;return new Promise(function(b,c){var d=null,e=document.getElementById(a.id());e&&(d=e.checked),b({name:a.get("name"),value:d?1:0})})},dg.CheckboxesElement=function(a,b,c){dg.FormElementPrepare(this,arguments)},dg.CheckboxesElement.prototype=new dg.FormElement,dg.CheckboxesElement.prototype.constructor=dg.CheckboxesElement,dg.CheckboxesElement.prototype.valueCallback=function(){var a=this;return new Promise(function(b,c){var d=null,e=document.querySelectorAll("#"+a.id()+' input[type="checkbox"]');if(e.length){d={};for(var f=0;f<e.length;f++){var g=e[f].value;null!==g&&(d[g]=e[f].checked?1:0)}}b({name:a.get("name"),value:d})})},dg.RadioElement=function(a,b,c){dg.FormElementPrepare(this,arguments)},dg.RadioElement.prototype=new dg.FormElement,dg.RadioElement.prototype.constructor=dg.RadioElement,dg.RadioElement.prototype.valueCallback=function(){var a=this;return new Promise(function(b,c){var d=null,e=document.getElementById(a.id());e&&(d=e.checked),b({name:a.get("name"),value:d?1:0})})},dg.RadiosElement=function(a,b,c){dg.FormElementPrepare(this,arguments)},dg.RadiosElement.prototype=new dg.FormElement,dg.RadiosElement.prototype.constructor=dg.RadiosElement,dg.RadiosElement.prototype.valueCallback=function(){var a=this;return new Promise(function(b,c){var d=null,e=document.querySelectorAll("#"+a.id()+' input[type="radio"]');if(e.length){d={};for(var f=0;f<e.length;f++){var g=e[f].value;null!==g&&(d[g]=e[f].checked?1:0)}}b({name:a.get("name"),value:d})})},dg.FieldDefinitionInterface=function(a,b,c){this.entityType=a,this.bundle=b,this.fieldName=c,this.fieldDefinition="user"==a?dg.fieldDefinitions[a][c]:dg.fieldDefinitions[a][b][c]},dg.FieldDefinitionInterface.prototype.get=function(a){return this.fieldDefinition[a],this.fieldDefinition[a]},dg.FieldDefinitionInterface.prototype.getLabel=function(){return this.get("label")},dg.FieldFormMode=function(a){this.fieldFormMode=a},dg.FieldFormMode.prototype.getWeight=function(){return this.fieldFormMode.weight},dg.FieldFormatter=function(){},dg.FieldFormatterPrepare=function(a,b){a._fieldDefinition=b[0],a._settings=b[1],a._label=b[2],a._viewMode=b[3],a._thirdPartySettings=b[4]},dg.FieldFormatter.prototype.viewElements=function(a,b){var c=a.getItems(),d={};if(0==c.length)return d;for(var e=0;e<c.length;e++)d[e]={_markup:c[e].value};return d},dg.FieldItemListInterface=function(a){this._items=a},dg.FieldItemListInterface.prototype.getItems=function(){return this._items},dg.FieldWidget=function(a,b,c,d,e,f){},dg.FieldWidget.prototype=new dg.FormElement,dg.FieldWidget.prototype.constructor=dg.FieldWidget,dg.FieldWidgetPrepare=function(a,b){a.widgetType="FieldWidget",a.entityType=b[0],a.bundle=b[1],a.fieldName=b[2],a.name=a.fieldName,a.element=b[3],a.items=b[4],a.delta=b[5],a.fieldDefinition=new dg.FieldDefinitionInterface(a.entityType,a.bundle,a.fieldName),a.fieldFormMode=a.element._fieldFormMode},dg.FieldWidget.prototype.getSetting=function(a){return this.settings[a],this.settings[a]},dg.FieldWidget.prototype.setSetting=function(a,b){this.settings[property]=b},dg.FieldWidget.prototype.getSettings=function(){return this.settings},dg.FieldWidget.prototype.setSettings=function(a){this.settings=a},dg.FieldWidget.prototype.valueCallback=function(){var a=this;return new Promise(function(b,c){var d=null,e=document.getElementById(a.id());e&&(d=e.value),b({name:a.get("name"),value:[{value:d}]})})},dg.hasClass=function(a,b){return a.classList.contains(b)},dg.addClass=function(a,b){dg.hasClass(a,b)||a.classList.add(b)},dg.removeClass=function(a,b){dg.hasClass(a,b)&&a.classList.remove(b)},dg.getBody=function(){return document.getElementsByTagName("BODY")[0]},dg.addBodyClass=function(a){dg.addClass(dg.getBody(),a)},dg.removeBodyClass=function(a){dg.removeClass(dg.getBody(),a)},dg.addAttrs=function(a,b){if(b._attributes){a=dg.qs(a);for(var c in b._attributes)if(b._attributes.hasOwnProperty(c)){var d=b._attributes[c];a.setAttribute(c,dg.isArray(d)?d.join(" "):d)}}},dg.el=function(a){return console.log("DEPRECATED: dg.el(), use dg:qs() instead"),dg.qs(a)},dg.qs=function(a){return dg.isString(a)&&(a=document.querySelector(a)),a},dg.qsa=function(a){return document.querySelectorAll(a)},dg.show=function(a){dg.qs(a).style.display="block"},dg.hide=function(a){dg.qs(a).style.display="none"},dg.isVisible=function(a){return!dg.inArray(dg.qs(a).style.display,["none",""])};dg.addJs=function(a){dg.addToHead("js",a)},dg.addCss=function(a){dg.addToHead("css",a)},dg.addToHead=function(a,b){var c=document.getElementsByTagName("head")[0],d={js:"script",css:"link"},e={js:"text/javascript",css:"stylesheet"},f=document.createElement(d[a]),g=b._attributes;for(var h in g)g.hasOwnProperty(h)&&(f[h]=g[h]);switch(a){case"js":f.type||(f.type=e[a]);break;case"css":f.rel||(f.rel=e[a])}c.appendChild(f)},dg.goto=function(a,b){a+=dg.extractQueryString(b),dg.router.navigate(a)},dg.reload=function(){location.reload()},dg.getDestination=function(){return{destination:dg.getDestinationPath()}},dg.getDestinationPath=function(){return dg.arg().join("/")},dg.getQueryString=function(a){a||(a=dg.getUrl());var b=a.indexOf("?");return-1!=b?a.substr(b,a.length-b+1):null},dg.extractQueryString=function(a){if(a&&a._query){var b=a._query,c=[];for(var d in b)b.hasOwnProperty(d)&&c.push(d+"="+b[d]);if(c.length)return"?"+c.join("&")}return""},dg.removeQueryString=function(a){var b=a.indexOf("?");return-1!=b?a.substr(0,b):a},dg.hasAttachments=function(a){return!!a._attached},dg.addAttachments=function(a){var b=function(a,b){return new Promise(function(c,d){var e=b.length,f=0,g=0,h=function(){var d=b[g];if(dg.libraryLoaded(a,d))return f++,g++,void c();var i=dg.getModuleLibrary(a,d),j=i.js?i.js.length:0,k=(i.css&&i.css.length,0),l=0,m=function(){var b=i.js[l];b._attributes.onload=function(){if(k++,l++,k<j)m();else{f++,g++;var b=dg.getLibraries();b[a]||(b[a]={}),b[a][d]||(b[a][d]={}),jDrupal.moduleInvokeAll("library_onload",a,d),f<e?h():c()}},dg.addJs(b)};k<j&&m()};h()})},c=[],d=a._attached;for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];jDrupal.isArray(f)&&c.push(b(e,f))}return Promise.all(c);var c,d,e,f},dg.libraryLoad=function(a,b){return new Promise(function(c,d){if(dg.libraryLoaded(a,b))return console.log("library already added!",a,b),void c();console.log("library not yet added",a,b);for(var e=dg.getModuleLibrary(a,b),f=["js","css"],g=f.length,h=null,i=0,j=0,k=0;k<g;k++)h=f[k],e[h]&&(j+=e[h].length);for(var k=0;k<g;k++)if(h=f[k],e[h]){i=e[h].length;for(var l=0;l<i;l++){var m=e[h][l];m._attributes.onload=function(){if(j--,console.log("done loading asset, assets left: "+j),!j){var d=dg.getLibraries();d[a]||(d[a]={}),d[a][b]||(d[a][b]={}),jDrupal.moduleInvokeAll("library_onload",a,b),c()}},console.log("loading asset",m),console.log("LOADING: "+a+"/"+b),"js"==h?dg.addJs(m):dg.addCss(m)}}})},dg.libraryLoaded=function(a,b){var c=dg._libraries;return!(!c[a]||!c[a][b])},dg.getLibraries=function(){return dg._libraries},dg.getModuleLibraries=function(a){return dg.invoke(a,"libraries")},dg.getModuleLibrary=function(a,b){return dg.getModuleLibraries(a)[b]},dg.getModuleRoutes=function(a){return dg.invoke(a,"routing")},dg.setMessage=function(a,b){if(jDrupal.isArray(a))for(var c in a)a.hasOwnProperty(c)&&0!=c.indexOf("_")&&a[c]._message&&""!=a[c]._message&&(a[c]._type||(a[c]._type="status"),dg.setMessage(a[c]._message,a[c]._type));else b||(b="status"),dg._messages.push({_message:a,_type:b,_theme:"message"})},dg.getMessageCount=function(){return dg._messages.length},dg.getMessages=function(){return dg._messages},dg.getMessage=function(){return dg.getMessageCount()?dg._messages.pop():null},dg.clearMessages=function(){dg._messages=[]},dg.showMessage=function(a,b){console.log("showing"),dg.setMessage(a,b),dg.showMessages()},dg.showMessages=function(){dg.blockRefresh("messages")},dg.modules=jDrupal.modules,dg.Module=function(){},dg.Module.prototype=new jDrupal.Module,dg.Module.prototype.constructor=dg.Module,dg.Module.prototype.routing=function(){return null},dg.createModule=function(a){if(!!window[a])return window[a];var b=new dg.Module;return window[a]=b,dg.modules[a]=b,b},dg.invoke=function(a,b){var c=jDrupal.moduleLoad(a);return c&&c[b]?c[b]():null},dg.Region=function(a,b){this._id=a;for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this._attributes||(this._attributes={}),this._attributes.id||(this._attributes.id=a),this._format||(this._format="div"),this._before||(this._before=""),
this._prefix||(this._prefix=""),this._suffix||(this._suffix=""),this._after||(this._after=""),this._hidden_blocks=[]},dg.Region.prototype.get=function(a){var b="_"+a;return void 0!==this[b]?this[b]:null},dg.Region.prototype.set=function(a,b){this["_"+property]=b},dg.loadRegions=function(){},dg.Region.prototype.getBlocks=function(){var a=dg.blocksLoad(),b={};for(var c in a)a.hasOwnProperty(c)&&a[c].get("region")==this.get("id")&&(b[a[c].get("weight")]=c);var d=[];for(var e in b)b.hasOwnProperty(e)&&d.push(b[e]);return d},dg.Region.prototype.getHiddenBlocks=function(){return this.get("hidden_blocks")},dg.Region.prototype.blockIsHidden=function(a){return jDrupal.inArray(a,this.getHiddenBlocks())},dg.Region.prototype.addHiddenBlock=function(a){this.blockIsHidden(a)||this.getHiddenBlocks().push(a)},dg._postRender=[],dg.appRender=function(a){dg.themeLoad().then(function(b){dg.regions={};var c=b.getRegions(),d="",e=(b.getRegionCount(),function(b){for(var c in dg.regions)if(dg.regions.hasOwnProperty(c)){var e=dg.regions[c],f=e.getBlocks();if(f.length){var g=e.get("format");d+=e.get("before")+"<"+g+" "+dg.attributes(e.get("attributes"))+">"+e.get("prefix");for(var h=0;h<f.length;h++){var i=b[f[h]],j=i.get("format");d+=i.get("before")+"<"+j+" "+dg.attributes(i.get("attributes"))+"></"+j+">"+i.get("after")}d+=e.get("suffix")+"</"+g+">"+e.get("after")}}d+=dg.render(a),document.getElementById("dg-app").innerHTML=d,window.scrollTo(0,0);var k=dg.blocksLoad(),l=[],m=function(a){var b=a.getRegion();if(b.getBlocks().length==b.getHiddenBlocks().length){var c=b.get("id");dg.removeElement(dg.cleanCssIdentifier(c)),dg.addBodyClass("no-"+c)}if(l.splice(l.indexOf(a.get("id")),1),0==l.length){dg.runPostRenders();var d=dg.loadForms();for(var e in d)d.hasOwnProperty(e)&&dg.formAttachSubmissionHandler(d[e].getFormDomId())}};for(c in k)k.hasOwnProperty(c)&&(l.push(c),k[c].getVisibility().then(function(a){if(a.visible)a.block.buildWrapper().then(function(a){a.render(),m(a)});else{var b=a.block,c=b.get("id");dg.regions[b.get("region")].addHiddenBlock(c),dg.removeElement(dg.cleanCssIdentifier(c)),m(a.block)}}))}),f=function(){var a={};for(var b in dg.regions)if(dg.regions.hasOwnProperty(b))for(var c=dg.regions[b].getBlocks(),d=0;d<c.length;d++)a[c[d]]=dg.blockLoad(c[d]);jDrupal.moduleInvokeAll("blocks_build_alter",a).then(e(a))};for(var g in c)if(c.hasOwnProperty(g)){var h=new dg.Region(g,c[g]);dg.setRenderElementDefaults(h),dg.regions[g]=h}jDrupal.moduleInvokeAll("regions_build_alter",dg.regions).then(f)})},dg.renderProperties=function(){return["_prefix","_suffix","_preRender","_postRender"]},dg.render=function(a,b){var c=typeof a;if(!a)return"";if("string"===c)return a;var d="";if("object"===c){if(dg.hasAttachments(a)){var e=dg.salt(),f="lib-"+e,g=a._format?a._format:"div";return dg.render({_markup:"<"+g+' id="'+f+'"></'+g+">",_postRender:[function(){dg.addAttachments(a).then(function(){var b=document.getElementById(f);a._attached.onload&&setTimeout(a._attached.onload,1),delete a._attached,b.outerHTML=dg.render(a,!0)})}]},!0)}a.markup&&(console.log('Use "_markup" instead of "markup" in:',a),a._markup=a.markup);var h=a._prefix?a._prefix:"",i=a._suffix?a._suffix:"";if(dg.isObject(h)&&(h=dg.render(h)),dg.isObject(i)&&(i=dg.render(i)),dg.isUndefined(a._postRender)&&(a._postRender=[]),a._markup)return dg.prepPostRenders(a),b&&setTimeout(dg.runPostRenders,1),h+a._markup+i;var j=!!a._theme,k=!!a._type;if(j||k){var l=h+dg.theme(j?a._theme:a._type,a)+i;return dg.prepPostRenders(a),l}var m=null,n={},o=0;d+=h;for(var p in a)if(a.hasOwnProperty(p)&&!jDrupal.inArray(p,dg.renderProperties())){var q=a[p],r=typeof q;if("object"===r&&null!==q)m=void 0!==q._weight?q._weight:0,dg.isUndefined(n[m])&&(n[m]=[]),n[m].push(dg.render(q)),o++;else if("array"===r)for(var s=0;s<q.length;s++)d+=dg.render(q[s])}if(o)for(m in n)if(n.hasOwnProperty(m))for(var s=0;s<n[m].length;s++)d+=n[m][s];d+=i}else if("array"===c)for(var s=0;s<a.length;s++)d+=dg.render(a[s]);return setTimeout(dg.runPostRenders,1),d},dg.prepPostRenders=function(a){if(a._postRender.length)for(var b=0;b<a._postRender.length;b++)dg._postRender.push(a._postRender[b])},dg.postRenderCount=function(){return dg._postRender.length},dg.runPostRenders=function(a,b){dg.isUndefined(a)&&(a=!1),dg.isUndefined(b)&&(b=1);var c=function(){var a=dg.postRenderCount();if(a){for(var b=0;b<a;b++){if(a>dg._postRenderMax){console.log("dg._postRenderMax reached: "+dg._postRenderMax),dg._postRender=[];break}dg._postRender[b]()}dg._postRender=[]}};a?setTimeout(c,b):c()},dg.token=function(){return jDrupal.token()},dg.restPath=function(){return jDrupal.restPath()},dg.path=function(){return jDrupal.path()},dg.commentLoad=function(){return jDrupal.commentLoad.apply(jDrupal,arguments)},dg.nodeLoad=function(){return jDrupal.nodeLoad.apply(jDrupal,arguments)},dg.userLoad=function(){return jDrupal.userLoad.apply(jDrupal,arguments)},dg.viewsLoad=function(){return jDrupal.viewsLoad.apply(jDrupal,arguments)},dg.router={_activeRoute:null,_stack:[],routes:[],mode:null,root:"/",config:function(a){return this.mode=a&&a.mode&&"history"==a.mode&&history.pushState?"history":"hash",this.root=a&&a.root?"/"+this.clearSlashes(a.root)+"/":"/",this},getPath:function(){var a="";if("history"===this.mode)a=this.clearSlashes(decodeURI(location.pathname+location.search)),a=a.replace(/\?(.*)$/,""),a="/"!=this.root?a.replace(this.root,""):a;else{var b=window.location.href.match(/#(.*)$/);a=b?b[1]:""}return dg.removeQueryString(this.clearSlashes(a))},getFragment:function(){return console.log("WARNING: getFragment() is deprecated, use getPath() instead."),this.getPath()},prepFragment:function(a){var b=a||this.getPath();return this.root+b},clearSlashes:function(a){return a.toString().replace(/\/$/,"").replace(/^\//,"")},add:function(a){return this.routes.push(a),this},remove:function(a){for(var b,c=0;this.routes.length,b=this.routes[c];c++)if(b.path.toString()===a.toString())return this.routes.splice(c,1),this;return this},flush:function(){return this.routes=[],this.mode=null,this.root="/",this},getStack:function(){return dg.router._stack},stackPush:function(a,b){dg.router.getStack().push({key:a.key,path:b})},stackPop:function(){var a=dg.router.getStack();return a.length?a.pop():null},check:function(a,b){var c=this;return""==a&&(a=dg.getFrontPagePath()),jDrupal.moduleInvokeAll("pre_process_route_change",a,b).then(function(d){if(d&&d.length)for(var e=0;e<d.length;e++){var f=d[e];if(f&&f!=dg.getPath())return void c.navigate(f)}var g=c.load(a);if(!g)return void console.log("dg.router.check() - 404?",a);dg.removeForms(),g.defaults||(g=c.load(dg.getFrontPagePath())),c.meetsRequirements(g)||(g=c.load("403")),g.defaults&&(dg.setTitle(g.defaults._title),dg.setDocumentTitle(g.defaults._title),dg.router.execute(function(a){var c=dg.getPath();dg.router.setActiveRoute(g),dg.router.stackPush(g,c),dg.content=a,dg.appRender(),jDrupal.moduleInvokeAll("post_process_route_change",g,c,b)},g,a))}),this},execute:function(a,b,c){b||(b=dg.getRoute()),c||(c=dg.getPath());var d=dg.router.matches(c).match;if(b.defaults._form){var e=b.defaults._form;d.length>1?(d.shift(),dg.addForm(e,dg.applyToConstructor(window[e],d)).getForm().then(a)):dg.addForm(e,new window[e]).getForm().then(a)}else{var f=null;d.length>1?(d.shift(),f=b.defaults._controller.apply(null,d)):f=b.defaults._controller(),jDrupal.isPromise(f)?f.then(a):a(f)}},listen:function(){var a=this,b=a.getPath(),c=function(){if(b!==a.getPath()){var c=b;b=a.getPath(),a.check(b,c)}};return clearInterval(this.interval),this.interval=setInterval(c,50),this},load:function(a){var b=this.matches(a);return b?this.routes[b.i]:null},matches:function(a){for(var b=dg.removeQueryString(this.prepFragment(a)),c=0;c<this.routes.length;c++)if(this.routes[c]){var d=this.routes[c].path;if(!d||(b.match(/\//g)||[]).length==(d.match(/\//g)||[]).length){var e=b.match(d);if(e)return{match:e,i:c}}}return null},navigate:function(a){if(a=a||"","history"===this.mode){var b=this.root+this.clearSlashes(a);history.pushState(null,null,b)}else dg.getPath()==a?dg.reload():window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+a;return this},getRoutes:function(){return this.routes},getActiveRoute:function(){return this._activeRoute},setActiveRoute:function(a){this._activeRoute=a},meetsRequirements:function(a){if(a||(a=this.getActiveRoute()),a.requirements){var b=a.requirements;if(b._role)return dg.hasRole(b._role);if(b._custom_access)return b._custom_access()}return!0},resolvePath:function(a){for(var b=dg.router.clearSlashes(dg.router.getRoutePath(a)),c="(.*)",d=b.indexOf(c),e=-1!=d;e;){for(var f=0,g=0;g<d;g++)"/"==b.charAt(g)&&f++;b=b.replace(c,dg.arg(f)),d=b.indexOf(c),e=-1!=d}return b},getRouteIndex:function(a){for(var b=this.getRoutes(),c=0;c<b.length;c++)if(b[c].key==a)return c;return-1},loadRoute:function(a){var b=this.getRouteIndex(a);return-1!=b?this.getRoutes()[b]:null},saveRoute:function(a,b){var c=this.getRouteIndex(a);-1!=c?this.getRoutes()[c]=b:this.getRoutes().push(b)},deleteRoute:function(a){var b=dg.router.getRouteIndex(a);-1!=b&&this.getRoutes().splice(b,1)},hasBaseRoute:function(a){return a||(a=this.getActiveRoute()),!!a.defaults._base_route},getBaseRoute:function(a){return a||(a=this.getActiveRoute()),this.hasBaseRoute(a)?dg.router.loadRoute(a.defaults._base_route):null},hasChildRoutes:function(a){return a||(a=this.getActiveRoute()),!!a.defaults._child_routes},initChildRoutes:function(a){a.defaults._child_routes=[]},getChildRoutes:function(a){return a||(a=this.getActiveRoute()),this.hasChildRoutes(a)?a.defaults._child_routes:null},addChildRoute:function(a,b){this.getChildRoutes(a).push(b)},saveAsChildRoute:function(a,b){"string"==typeof a&&(a=dg.router.loadRoute(a)),"string"==typeof b&&(b=dg.router.loadRoute(b)),a&&b&&(a.defaults._base_route||(a.defaults._base_route=b.key),dg.router.hasChildRoutes(b)||dg.router.initChildRoutes(b),dg.router.addChildRoute(b,a.key),dg.router.saveRoute(b.key,b))},getRouteKey:function(a){return a||(a=this.getActiveRoute()),a.key},getRoutePath:function(a){return a||(a=this.getActiveRoute()),a.path},getRouteTitle:function(a){return a||(a=this.getActiveRoute()),a.defaults._title}},dg._GET=function(a,b){var c=b||window.location.href,d=new RegExp("[?&]"+a+"=([^&#]*)","i"),e=d.exec(c);return e?e[1]:null},dg.Theme=function(){this.regions=null},dg.Theme.prototype.get=function(a){return void 0!==this[a]?this[a]:null},dg.Theme.prototype.getRegions=function(){return this.get("regions")},dg.Theme.prototype.getRegionCount=function(){var a=0,b=this.get("regions");for(var c in b)b.hasOwnProperty(c)&&a++;return a},dg.themeLoad=function(){return new Promise(function(a,b){if(!dg.activeTheme){var c=dg.config("theme");if(!c)return void console.log("No theme config found in settings.js file");var d=jDrupal.ucfirst(dg.getCamelCase(c.name));if(!dg.themes[d]){return void b("Failed to load theme ("+d+") - did you include its .js file in index.html?")}dg.activeTheme=new dg.themes[d],dg.modules[name]=new dg.Module}a(dg.activeTheme)})},dg.theme=function(a,b){try{if(b||(b={}),b._markup)return b._markup;var c="theme_"+a;if(!dg[c]){var d=null;arguments.callee.caller&&(d=arguments.callee.caller.name);var e="WARNING: dg."+c+"() does not exist.";return d&&(e+=" Called by: "+d+"()."),console.log(e),""}dg.setRenderElementDefaults(b);var f=dg[c].call(null,b);return f instanceof Promise?(f.then(function(a){document.getElementById(a.variables._attributes.id).innerHTML=dg.render(a.content)}),"<div "+dg.attributes(b._attributes)+"></div>"):f}catch(error){console.log("dg.theme - "+error)}},dg.setRenderElementDefaults=function(a){if("object"==typeof a){void 0===a._attributes&&(a._attributes={}),void 0===a._attributes.class&&(a._attributes.class=[]);for(var b in a)a.hasOwnProperty(b)&&!dg.isProperty(b,a)&&"object"==typeof a[b]&&dg.setRenderElementDefaults(a[b])}},dg.hasRole=function(a){return jDrupal.currentUser().hasRole(a)},dg.isAdmin=function(){return dg.hasRole("administrator")},dg.theme_view=function(a){return a._attributes.id||(a._attributes.id="view-"+dg.userPassword()),new Promise(function(b){jDrupal.viewsLoad(a._path).then(function(c){var d="",e=a._format?a._format:"div",f=a._format_attributes?a._format_attributes:null;if(a._title&&("object"==typeof a._title?d+=dg.render(a._title):d+="<h2>"+a._title+"</h2>"),d+="<"+e+" "+dg.attributes(f)+">",c.results.length>0){for(var g=0;g<c.results.length;g++){var h="",i="";switch(e){case"ul":case"ol":h="<li>",i="</li>";break;case"table":h="<tr>",i="</tr>"}d+=h+a._row_callback(c.results[g])+i}var j=a._contentPrefix?a._contentPrefix:"",k=a._contentSuffix?a._contentSuffix:"";"object"==typeof j&&(j=dg.render(j)),"object"==typeof k&&(k=dg.render(k)),d=j+d+k}else a._empty&&("object"==typeof a._empty?d+=dg.render(a._empty):d+='<div class="view-empty">'+a._empty+"</div>");d+="</"+e+">",b({variables:a,content:d})})})},dg.modules.admin=new dg.Module,dg.modules.admin.blocks=function(){var a={};return a.admin_menu={build:function(){return new Promise(function(a,b){var c={};c.menu={_theme:"item_list",_title:"Administer",_items:[dg.l(dg.t("Content"),"node/add")]},a(c)})}},a},dg.modules.core=new dg.Module,dg.modules.core=new dg.Module,dg.modules.core.FieldFormatter={},dg.modules.core.FieldFormatter.entity_reference_label=function(){dg.FieldFormatterPrepare(this,arguments)},dg.modules.core.FieldFormatter.entity_reference_label.prototype=new dg.FieldFormatter,dg.modules.core.FieldFormatter.entity_reference_label.prototype.constructor=dg.modules.core.FieldFormatter.entity_reference_label,dg.modules.core.FieldFormatter.entity_reference_label.prototype.viewElements=function(a,b){var c=a.getItems(),d={};if(0==c.length)return d;for(var e=0;e<c.length;e++)d[e]={_theme:"entity_reference_label",_item:c[e]};return d},dg.modules.core.FieldFormatter.number_decimal=function(){dg.FieldFormatterPrepare(this,arguments)},dg.modules.core.FieldFormatter.number_decimal.prototype=new dg.FieldFormatter,dg.modules.core.FieldFormatter.number_decimal.prototype.constructor=dg.modules.core.FieldFormatter.number_decimal,dg.modules.core.FieldFormatter.number_decimal.prototype.viewElements=function(a,b){var c=a.getItems(),d={};if(0==c.length)return d;for(var e=0;e<c.length;e++)d[e]={_theme:"number_decimal",_item:c[e]};return d},dg.modules.core.FieldFormatter.number_float=function(){dg.FieldFormatterPrepare(this,arguments)},dg.modules.core.FieldFormatter.number_float.prototype=new dg.FieldFormatter,dg.modules.core.FieldFormatter.number_float.prototype.constructor=dg.modules.core.FieldFormatter.number_float,dg.modules.core.FieldFormatter.number_float.prototype.viewElements=function(a,b){var c=a.getItems(),d={};if(0==c.length)return d;for(var e=0;e<c.length;e++)d[e]={_theme:"number_float",_item:c[e]};return d},dg.modules.core.FieldFormatter.number_integer=function(){dg.FieldFormatterPrepare(this,arguments)},dg.modules.core.FieldFormatter.number_integer.prototype=new dg.FieldFormatter,dg.modules.core.FieldFormatter.number_integer.prototype.constructor=dg.modules.core.FieldFormatter.number_integer,dg.modules.core.FieldFormatter.number_integer.prototype.viewElements=function(a,b){var c=a.getItems(),d={};if(0==c.length)return d;for(var e=0;e<c.length;e++)d[e]={_theme:"number_integer",_item:c[e]};return d},dg.modules.core.FieldFormatter.string=function(){dg.FieldFormatterPrepare(this,arguments)},dg.modules.core.FieldFormatter.string.prototype=new dg.FieldFormatter,dg.modules.core.FieldFormatter.string.prototype.constructor=dg.modules.core.FieldFormatter.string,dg.modules.core.FieldFormatter.string.prototype.viewElements=function(a,b){var c=a.getItems(),d={};if(0==c.length)return d;for(var e=0;e<c.length;e++)d[e]={_theme:"string",_item:c[e]};return d},dg.modules.core.FieldWidget={},dg.modules.core.FieldWidget.decimal=function(a,b,c,d,e,f){dg.FieldWidgetPrepare(this,arguments)},dg.modules.core.FieldWidget.decimal.prototype=new dg.FieldWidget,dg.modules.core.FieldWidget.decimal.prototype.constructor=dg.modules.core.FieldWidget.decimal,dg.modules.core.FieldWidget.decimal.prototype.form=function(a,b,c,d,e){c._type="number",c._title=this.fieldDefinition.getLabel(),c._title_placeholder=!0,c._widgetType="FieldWidget",c._module="core",c._attributes.step="any",a&&"undefined"!==a[b]&&(c._value=a[b].value,c._attributes.value=c._value)},dg.modules.core.FieldWidget.float=function(a,b,c,d,e,f){dg.FieldWidgetPrepare(this,arguments)},dg.modules.core.FieldWidget.float.prototype=new dg.FieldWidget,dg.modules.core.FieldWidget.float.prototype.constructor=dg.modules.core.FieldWidget.float,dg.modules.core.FieldWidget.float.prototype.form=function(a,b,c,d,e){c._type="number",c._title=this.fieldDefinition.getLabel(),c._title_placeholder=!0,c._widgetType="FieldWidget",c._module="core",c._attributes.step="any",a&&"undefined"!==a[b]&&(c._value=a[b].value,c._attributes.value=c._value)},dg.modules.core.FieldWidget.integer=function(a,b,c,d,e,f){dg.FieldWidgetPrepare(this,arguments)},dg.modules.core.FieldWidget.integer.prototype=new dg.FieldWidget,dg.modules.core.FieldWidget.integer.prototype.constructor=dg.modules.core.FieldWidget.integer,dg.modules.core.FieldWidget.integer.prototype.form=function(a,b,c,d,e){c._type="number",c._title=this.fieldDefinition.getLabel(),c._title_placeholder=!0,c._widgetType="FieldWidget",c._module="core",a&&"undefined"!==a[b]&&(c._value=a[b].value,c._attributes.value=c._value)},dg.modules.core.FieldWidget.string=function(a,b,c,d,e,f){dg.FieldWidgetPrepare(this,arguments)},dg.modules.core.FieldWidget.string.prototype=new dg.FieldWidget,dg.modules.core.FieldWidget.string.prototype.constructor=dg.modules.core.FieldWidget.string,dg.modules.core.FieldWidget.string.prototype.form=function(a,b,c,d,e){c._type="textfield",c._title=this.fieldDefinition.getLabel(),c._title_placeholder=!0,c._widgetType="FieldWidget",c._module="core",a&&"undefined"!==a[b]&&(c._value=a[b].value,c._attributes.value=c._value)},dg.modules.core.FormWidget={},dg.modules.core.FormWidget.string_textfield=function(a,b,c,d,e,f){dg.FormWidgetPrepare(this,arguments)},dg.modules.core.FormWidget.string_textfield.prototype=new dg.FormWidget,dg.modules.core.FormWidget.string_textfield.prototype.constructor=dg.modules.core.FormWidget.string_textfield,dg.modules.core.FormWidget.string_textfield.prototype.form=function(a,b,c,d,e){c._type="textfield",c._title=this.fieldName,c._title_placeholder=!0,c._widgetType="FormWidget",c._module="core",a&&"undefined"!==a[b]&&(c._value=a[b].value,c._attributes.value=c._value)},dg.modules.core.FormWidget.bundle=function(a,b,c,d,e,f){dg.FormWidgetPrepare(this,arguments)},dg.modules.core.FormWidget.bundle.prototype=new dg.FormWidget,dg.modules.core.FormWidget.bundle.prototype.constructor=dg.modules.core.FormWidget.bundle,dg.modules.core.FormWidget.bundle.prototype.form=function(a,b,c,d,e){c._type="hidden",a&&"undefined"!==a[b]&&(c._value=a[b].value,c._attributes.value=c._value)},dg.modules.core.FormWidget.bundle.prototype.valueCallback=function(a,b,c){return{name:new(dg[jDrupal.ucfirst(this.get("entityType"))])(null).getEntityKey("bundle"),value:[{target_id:this.get("bundle")}]}},dg.modules.core.FormWidget.entityID=function(a,b,c,d,e,f){dg.FormWidgetPrepare(this,arguments)},dg.modules.core.FormWidget.entityID.prototype=new dg.FormWidget,dg.modules.core.FormWidget.entityID.prototype.constructor=dg.modules.core.FormWidget.entityID,dg.modules.core.FormWidget.entityID.prototype.form=function(a,b,c,d,e){c._type="hidden",a&&"undefined"!==a[b]&&(c._value=a[b].value,c._attributes.value=c._value)},dg.theme_entity_reference_label=function(a){var b=a._item;return dg.l(b.target_id,b.url.replace(dg.path(),""))},dg.theme_string=function(a){return a._item.value},dg.theme_number_decimal=function(a){return a._item.value},dg.theme_number_float=function(a){return a._item.value},dg.theme_number_integer=function(a){return a._item.value},dg.modules.image=new dg.Module,dg.modules.image.FieldFormatter={},dg.modules.image.FieldFormatter.image=function(){dg.FieldFormatterPrepare(this,arguments)},dg.modules.image.FieldFormatter.image.prototype=new dg.FieldFormatter,dg.modules.image.FieldFormatter.image.prototype.constructor=dg.modules.image.FieldFormatter.image,dg.modules.image.FieldFormatter.image.prototype.viewElements=function(a,b){var c=a.getItems(),d={};if(0==c.length)return d;for(var e=0;e<c.length;e++){var f=c[e];d[e]={_theme:"image",_path:f.url,_attributes:{alt:f.alt,title:f.title,width:f.width,height:f.height}}}return d},dg.modules.system=new dg.Module,dg.modules.system.routing=function(){var a={};return a["system.dashboard"]={path:"/dg",defaults:{_title:"Getting started",_controller:function(){return new Promise(function(a,b){var c={},d=dg.currentUser(),e="Welcome to DrupalGap, ";d.isAuthenticated()?e+=d.getAccountName()+"!":e+=dg.l("click here","http://docs.drupalgap.org/8")+" to view the documentation.",c.welcome={_markup:"<p>"+e+"</p>"},c.header={_markup:"<h2>"+dg.t("Resources")+"</h2>"},c.resources={_theme:"item_list",_items:[dg.l(dg.t("Hello World"),"http://docs.drupalgap.org/8/Hello_World"),dg.l(dg.t("Create a Module"),"http://docs.drupalgap.org/8/Modules/Create_a_Custom_Module")]},a(c)})}}},a["system.403"]={path:"/403",defaults:{_title:"403 - Access denied",_controller:function(){return new Promise(function(a,b){a({msg:{_theme:"message",_type:"warning",_message:dg.t("You do not have access to this page.")}})})}}},a["system.404"]={path:"/404",defaults:{_title:"404 - Page not found",_controller:function(){return new Promise(function(a,b){a(dg.t("Sorry, that page was not found."))})}}},a},dg.modules.system.blocks=function(){var a={};return a.logo={build:function(){return new Promise(function(a,b){a(dg.config("logo"))})}},a.main={build:function(){return new Promise(function(a,b){a(dg.content)})}},a.main_menu={build:function(){return new Promise(function(a,b){var c={},d=[dg.l(dg.t("Home"),"")];c.menu={_theme:"item_list",_items:d},a(c)})}},a.primary_local_tasks=dg.modules.system.blockPrimaryLocalTasks(),a.powered_by={build:function(){return new Promise(function(a,b){var c={};c.list={_theme:"item_list",_title:dg.t("Powered by"),_items:[dg.l("DrupalGap","http://drupalgap.org"),dg.l("Drupal","http://drupal.org")]},a(c)})}},a.title={build:function(){return new Promise(function(a,b){var c=dg.getTitle();if("string"==typeof c){a({_theme:"title",_title:dg.t(c)})}else a(c)})}},a.messages={build:function(){return new Promise(function(a,b){if(!dg.getMessageCount())return void a();for(var c={},d=dg.getMessages(),e=0;e<d.length;e++)c["msg"+e]=d[e];dg.clearMessages(),a(c)})}},a},dg.modules.system.configFormSubmit=function(a,b){for(var c in a)dg.isFormElement(c,a)&&"actions"!=c&&dg.setVar(c,b.getValue(c))},dg.modules.system.blockPrimaryLocalTasks=function(){return{build:function(){return new Promise(function(a,b){var c={},d=[],e=dg.router.getActiveRoute(),f=null,g=null,h=null;if(dg.router.hasBaseRoute(e)){var i=dg.router.getBaseRoute(e);f=dg.router.getChildRoutes(i),g=dg.router.getRouteTitle(i),h=dg.router.resolvePath(i)}else dg.router.hasChildRoutes(e)&&(f=dg.router.getChildRoutes(e),g=dg.router.getRouteTitle(e),h=dg.router.resolvePath(e));if(!f)return void a("");d.push({_theme:"list_item",_text:{_theme:"link",_text:g,_path:h,_key:dg.router.getRouteKey(i),_attributes:{class:[]}},_attributes:{class:[]}});for(var j=0;j<f.length;j++){var k=dg.router.loadRoute(f[j]);k&&dg.router.meetsRequirements(k)&&d.push({_theme:"list_item",_text:{_theme:"link",_text:dg.router.getRouteTitle(k),_path:dg.router.resolvePath(k),_key:dg.router.getRouteKey(k),_attributes:{class:[]}},_attributes:{class:[]}})}c.local_tasks={_theme:"item_list",_items:d},a(c)})}}},dg.modules.text=new dg.Module,dg.modules.text=new dg.Module,dg.modules.text.FieldFormatter={},dg.modules.text.FieldFormatter.text_default=function(){dg.FieldFormatterPrepare(this,arguments)},dg.modules.text.FieldFormatter.text_default.prototype=new dg.FieldFormatter,dg.modules.text.FieldFormatter.text_default.prototype.constructor=dg.modules.text.FieldFormatter.text_default,dg.modules.text.FieldFormatter.text_default.prototype.viewElements=function(a,b){var c=a.getItems(),d={};if(0==c.length)return d;for(var e=0;e<c.length;e++)d[e]={_markup:c[e].value};return d},dg.modules.text.FieldWidget={},dg.modules.text.FieldWidget.text_with_summary=function(a,b,c,d,e,f){dg.FieldWidgetPrepare(this,arguments)},dg.modules.text.FieldWidget.text_with_summary.prototype=new dg.FieldWidget,dg.modules.text.FieldWidget.text_with_summary.prototype.constructor=dg.modules.text.FieldWidget.text_with_summary,dg.modules.text.FieldWidget.text_with_summary.prototype.form=function(a,b,c,d,e){c._type="textarea",c._title=this.fieldDefinition.getLabel(),c._title_placeholder=!0,c._widgetType="FieldWidget",c._module="text",a&&"undefined"!==a[b]&&(c._value=a[b].value)},dg.modules.user=new dg.Module,dg.modules.user.routing=function(){var a={};return a["user.login"]={path:"/user/login",defaults:{_form:"UserLoginForm",_title:"Log in"}},a["user.logout"]={path:"/user/logout",defaults:{_title:"Log out",_controller:function(){return new Promise(function(a,b){a("Logging out..."),jDrupal.userLogout().then(function(){dg.goto(dg.getFrontPagePath())})})}}},a},dg.modules.user.blocks=function(){var a={};return a.user_login={build:function(){return new Promise(function(a,b){if(!dg.currentUser().isAuthenticated()&&"user/login"!=dg.getPath()){var c=dg.addForm("UserLoginForm",dg.applyToConstructor(UserLoginForm));c.get("form")._action=dg.getPath(),c.getForm().then(a)}})}},a.user_menu={build:function(){return new Promise(function(a,b){var c=[];c=dg.currentUser().isAuthenticated()?[dg.l(dg.t("My account"),"user/"+dg.currentUser().id()),dg.l(dg.t("Logout"),"user/logout")]:[dg.l(dg.t("Login"),"user/login"),dg.l(dg.t("Register"),"user/register")];var d={};d.menu={_theme:"item_list",_items:c},a(d)})}},a};var UserLoginForm=function(){this.buildForm=function(a,b){return new Promise(function(b,c){a._action||(a._action=dg.getFrontPagePath()),a.name={_type:"textfield",_title:"Username",_required:!0,_title_placeholder:!0},a.pass={_type:"password",_title:"Password",_required:!0,_title_placeholder:!0},a.actions={_type:"actions",submit:{_type:"submit",_value:"Log in",_button_type:"primary"}},b(a)})},this.submitForm=function(a,b){return new Promise(function(c,d){jDrupal.userLogin(b.getValue("name"),b.getValue("pass")).then(function(){dg.isFrontPage()?dg.router.check(dg.getFrontPagePath()):dg.getPath()==a._action&&dg.router.check(a._action),c()},function(a){var b=dg.qs("#edit-pass");b.value="",b.focus();var c=JSON.parse(a.responseText).message;dg.alert?dg.alert(c):console.log(c),d()})})}};UserLoginForm.prototype=new dg.Form("UserLoginForm"),UserLoginForm.constructor=UserLoginForm,dg.theme_bucket=function(a){a._format||(a._format="div");var b=a._format;if(a._attributes.id||(a._attributes.id=b+"-"+dg.salt()),a._grab){var c={},d=a._prefix?dg.render(a._prefix):"",e=a._suffix?dg.render(a._suffix):"";return c.bucket={_markup:d+"<"+b+" "+dg.attributes(a._attributes)+"></"+b+">"+e,_postRender:[function(){a._grab().then(function(b){document.getElementById(a._attributes.id).innerHTML=dg.render(b),dg.postRenderCount()&&dg.runPostRenders()})}]},dg.render(c)}},dg.theme_button=function(a){return a._value||(a._value=""),a._attributes.type||(a._attributes.type="button"),"<button "+dg.attributes(a._attributes)+">"+a._value+"</button>"},dg.theme_container=function(a){return"<div "+dg.attrs(a)+">"+dg.render(a._children)+"</div>"},dg.theme_document_title=function(a){return a._title+" | "+dg.config("title")},dg.theme_image_style=function(a){return a._path=dg.imageStyleUrl(a._style_name,a._path),dg.theme_image(a)},dg.imageStyleUrl=function(a,b){var c="public://",d=-1!=b.indexOf(c),e=jDrupal.sitePath(),f=jDrupal.basePath();if(d){var g="sites/default/files/styles/"+a+"/public/",h=f+g;return(dg.isCompiled()?e+h:h)+b.replace(c,"")}return e+f+b},dg.theme_image=function(a){a._attributes.src=a._attributes.src?a._attributes.src:a._path;var b=a._attributes.src;return(b&&-1!=b.indexOf("public://")||-1!=b.indexOf("private://"))&&(a._attributes.src=dg.imagePath(b)),a._alt&&(a._attributes.alt=a._alt),a._title&&(a._attributes.title=a._title),"<img "+dg.attributes(a._attributes)+"/>"},dg.theme_item_list=function(a){var b="",c=a._type?a._type:"ul",d=a._h?a._h:3;if(a._title&&(b+="object"==typeof a._title?dg.render(a._title):"<h"+d+">"+a._title+"</h"+d+">"),a._items_prefix&&(b+=a._items_prefix),b+="<"+c+" "+dg.attributes(a._attributes)+">",a._items&&a._items.length>0){var e=a._itemType?a._itemType:"li";for(var f in a._items)a._items.hasOwnProperty(f)&&(b+=dg.theme("list_item",{_item:a._items[f],_itemType:e,_i:f,_total:a._items.length}))}return b+="</"+c+">",a._items_suffix&&(b+=a._items_suffix),b},dg.theme_link=function(a){var b=a._text?a._text:"",c=a._path;""==c&&(c=dg.getFrontPagePath());var d=a._attributes;if(void 0===d.href&&c){var e=c;-1!=c.indexOf("http://")||-1!=c.indexOf("https://")||(e=0==c.indexOf("/")?c:"#"+c),c!=dg.getPath()||dg.inArray("active",d.class)||d.class.push("active"),e+=dg.extractQueryString(a),d.href=e}return a._inAppBrowser&&dg.isCompiled()&&dg_iab.init(a),"<a "+dg.attributes(d)+">"+b+"</a>"},dg.theme_list_item=function(a){var b=a._item,c=a._itemType?a._itemType:"li",d=a._i;if("object"==typeof b){if(dg.setRenderElementDefaults(b),0==d?b._attributes.class.push("first"):d==b._total-1&&b._attributes.class.push("last"),b._theme&&"list_item"!=b._theme)return dg.theme(b._theme,b);var e=b._text?b._text:"";return"<"+c+" "+dg.attributes(b._attributes)+">"+dg.render(e)+"</"+c+">"}var f={};return 0==d?f.class=["first"]:d==b._total-1&&(f.class=["last"]),"<"+c+" "+dg.attributes(f)+">"+b+"</"+c+">"},dg.theme_message=function(a){var b=a._format?a._format:"div",c=a._type?a._type:null,d=a._attributes.class,e="messages";return dg.inArray(e,d)||d.push(e),c&&!dg.inArray(c,d)&&d.push(c),"<"+b+" "+dg.attrs(a)+">"+a._message+"</"+b+">"},dg.theme_title=function(a){return"<h1 "+dg.attrs(a)+">"+a._title+"</h1>"};